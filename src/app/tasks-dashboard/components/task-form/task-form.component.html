<section class="task-form">
  <div class="task-form__header">
    <div class="task-form__title-wrap"> 
      <h1 class="task-form__title" [class.hovered]="tasks.length">
        <span *ngIf="tasks.length">Youâ€™ve got</span>
        <span *ngIf="!tasks.length">You haven't got tasks yet!</span>

        <span class="task-form__amount" *ngIf="tasks.length">
          {{ tasks.length }} {{ suffix }}
        </span>
      </h1>
      <!-- <div class="task-form__filter-wrap">
        <p>Filter by a year:</p>
        <select>
          <option value=""></option>
        </select>
      </div> -->
    </div>
    <app-button [text]="!isFormShown ? 'Add new' : 'Hide form'"
                (click)="toggleForm()"
                [tasks]="tasks.length"
                [formShown]="isFormShown"></app-button>
  </div>
 
  <form class="task-form__form form"
        [ngClass]="isFormShown && tasks.length ? 'opened' : 'closed'"
        [class.opened-initial]="isFormShown && !tasks.length"
        (ngSubmit)="handleSubmit()"
        [formGroup]="form">
    <span class="form__input-wrap">
      <input type="text"
             name="name"
             formControlName="name"
             class="input"
             placeholder="Enter your task name...">
      
      <span class="form__input-error" 
            [class.shown]="valid(name, 'required')">
            required
      </span>

      <!-- <span class="form__input-error" 
            [class.shown]="valid(name, 'maxlength')" >
            {{ valid(name, 'maxlength') && name.errors?.maxlength.requiredLength }}
            characters is allowed
      </span> -->

      <span class="form__input-error" 
            [class.shown]="valid(name, 'pattern')">
            english characters are allowed
      </span>
    </span>

    <span class="form__input-wrap">
      <input type="date"
             name="date"
             [min]="today"
             formControlName="date"
             class="form__input-date input">

      <span class="form__input-error" 
            [class.shown]="valid(date, 'required')">
            required
      </span>
    </span>

    <ngx-select-dropdown formControlName="status" [options]="statusOptions"></ngx-select-dropdown>


    <ngx-select-dropdown formControlName="importance" [options]="importanceOptions"></ngx-select-dropdown>

    <app-button [text]="'Add'"
                [type]="'submit'">
    </app-button>
  </form>
</section>
